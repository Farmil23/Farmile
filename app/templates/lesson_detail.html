{% extends "base.html" %}
{% block content %}
<div class="lesson-container card">
    <div class="page-header">
        <div>
            <h2>{{ lesson.title }}</h2>
            <p class="subtitle">Modul: {{ lesson.module.title }}</p>
        </div>
    </div>

    <div class="lesson-content">
        {% if lesson.url and 'youtube.com' in lesson.url %}
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/{{ lesson.url.split('v=')[-1].split('&')[0] }}" 
                        frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen></iframe>
            </div>
        {% elif lesson.url %}
            <p>Silakan pelajari materi dari sumber berikut:</p>
            <a href="{{ lesson.url }}" target="_blank" rel="noopener noreferrer">{{ lesson.url }}</a>
        {% else %}
            <p>Konten untuk materi ini sedang disiapkan.</p>
        {% endif %}
    </div>

    <hr>

    <div class="lesson-completion">
        <form action="{{ url_for('routes.complete_lesson', lesson_id=lesson.id) }}" method="POST">
            <button type="submit" class="button-primary">Tandai Selesai & Kembali ke Roadmap</button>
        </form>
    </div>
</div>
{% endblock %}