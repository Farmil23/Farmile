{% extends "base.html" %}
{% block content %}
<div class="dashboard-layout">
    {% include 'dashboard_sidebar.html' %}
    <main class="dashboard-content">
        <div class="page-header">
            </div>
        <h4>Progres Keseluruhan: {{ progress }}%</h4>
        <div class="progress-bar">
            <div class="progress-bar-inner" style="width: {{ progress }}%;"></div>
        </div>
        <div class="module-accordion">
            {% for module in modules %}
            <details class="module-item card" open>
                <summary>
                    <div class="summary-title">
                        <span class="module-order">Bagian {{ module.order }}</span>
                        {{ module.title }}
                    </div>
                </summary>
                <ul class="lesson-list">
                    {% for lesson in module.lessons.order_by('order').all() %}
                    <li>
                        <input type="checkbox" id="lesson-{{ lesson.id }}" data-lesson-id="{{ lesson.id }}" {% if lesson.id in completed_lesson_ids %}checked{% endif %}>
                        <label for="lesson-{{ lesson.id }}" class="lesson-label">
                            {% if lesson.lesson_type == 'video' %}<svg></svg>{% else %}<svg></svg>{% endif %}
                            <div class="lesson-info">
                                {{ lesson.title }}
                                <span>Estimasi: {{ lesson.estimated_time }} menit</span>
                            </div>
                        </label>
                        <a href="{{ lesson.url }}" target="_blank" class="learn-link button-secondary">Mulai</a>
                    </li>
                    {% endfor %}
                </ul>
            </details>
            {% endfor %}
        </div>
    </main>
</div>
{% endblock %}